<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // 变量的作用域
        // 全局变量,在整个script标签里都有效，浏览器关闭才被销毁，占内存
        var a = 2;
        // 调用的是全局变量
        console.log(a);


        function fn() {
            // 局部变量，只在fn函数里有效，函数执行完毕，就被销毁，节约内存
            var a = 5;
            // 调用的是局部变量
            console.log(a);

        }
        fn();



        // 调用的是全局变量
        if (a > 1) {
            console.log(a);
        }

        // 作用域链，也就是就近原则,函数嵌套时，并且变量名冲突，输出结果是离那行代码最近的变量值。
        var b = 7;

        function fn1() {
            var a = 3,
                b = 4;
            fn2();

            function fn2() {
                fn3();

                function fn3() {
                    var a = 6;
                    console.log(a);
                    console.log(b);
                }
            }
        }
        fn1();


        // let和const声明的局部变量是块级作用域,在所有声明它的当前{}里有效;

        // let声明的变量,只在当前{}内有效
        if (1) {
            // 声明变量
            let num = 1;
            alert(num); // 得到1;
        }
        // alert(num); // {}外面输出num就报未定义错误;


        // let声明的全局变量,只能在声明变量的下面使用,否则报错,系统没有对let声明的变量进行变量提升;
        // alert('let声明的全局变量在声明变量上面调用' + num2); //报错,在初始化之前无法访问'num2';
        let num2 = 3;
        alert('let声明的全局变量在变量下面调用' + num2); // 得到3;
        if (1) {
            alert('let声明的全局变量在if的{}里调用' + num2); // 得到3;

        }

        function show() {
            alert('let声明的全局变量在函数的{}里调用' + num2); // 得到3;
        }
        show();


        // const声明变量,变量要在声明的时候赋值,变量声明后不能改,以后也不能再重新赋值,否则报错;
        // 系统也没有对const声明的变量进行变量提升,所以只能在声明的下面使用,否则报错
        const IP = '127.0.0.1';
        alert('const声明的全局变量在变量下面调用' + IP); // 得到127.0.0.1;

        // 相同作用域下,const声明的变量,只要变量名一样,就不能通过任何声明方式修改,所以用var声明IP这个变量也不行;
        // var IP = 11;
        // console.log(IP); //报错, 变量已存在;

        if (1) {
            const aaa = 6;
            alert('const在if里声明的局部变量在if的{}里调用' + aaa); // 得到6;
            alert('const声明的全局变量在if的{}里调用' + IP); // 得到127.0.0.1;
        }
        // alert('const在if里声明的局部变量在if的{}外面调用' + aaa); // 报错,未定义;

        function show1() {
            alert('const声明的全局变量在函数的{}里调用' + IP); // 得到127.0.0.1;
            const bbb = 8;
            alert('const在函数内声明的局部变量在函数的{}里调用' + bbb); // 得到8;

            // 不同作用域下,用var声明一个叫IP的局部变量就可以成功声明,声明全局的则报错,因为这个变量名已经被const声明了;
            var IP = 11;
            console.log(IP);
        }
        show1();

        alert('const在函数内声明的局部变量在函数的{}外面调用' + bbb); // 报错,未定义;
        // 在不同作用域下,可以声明名字相同的变量
        const bbb = 9;
        console.log(bbb); //得到9;
    </script>
</head>

<body>

</body>

</html>